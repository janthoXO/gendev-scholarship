openapi: 3.0.0
info:
  title: Internet Offers Service
  description: API for retrieving internet offers based on address and connection type.
  version: 1.0.0

servers:
  - url: https://webwunder.gendev7.check24.fun:443/endpunkte/soap/ws

paths:
  /legacyGetInternetOffers:
    post:
      summary: Get Internet Offers
      description: Retrieve available internet offers based on given input data.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Input'
      responses:
        200:
          description: A list of available internet products.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Output'

components:
  schemas:
    SupportedCountry:
      type: string
      enum: [DE, AT, CH]

    Address:
      type: object
      properties:
        street:
          type: string
        houseNumber:
          type: string
        city:
          type: string
        plz:
          type: string
        countryCode:
          $ref: '#/components/schemas/SupportedCountry'

    ConnectionType:
      type: string
      enum: [DSL, CABLE, FIBER, MOBILE]

    Voucher:
      type: object
      properties:
        type:
          type: string
          enum: [percentageVoucher, absoluteVoucher]

    PercentageVoucher:
      allOf:
        - $ref: '#/components/schemas/Voucher'
        - type: object
          properties:
            percentage:
              type: integer
            maxDiscountInCent:
              type: integer

    AbsoluteVoucher:
      allOf:
        - $ref: '#/components/schemas/Voucher'
        - type: object
          properties:
            discountInCent:
              type: integer
            minOrderValueInCent:
              type: integer

    ProductInfo:
      type: object
      properties:
        speed:
          type: integer
        monthlyCostInCent:
          type: integer
        monthlyCostInCentFrom25thMonth:
          type: integer
        voucher:
          $ref: '#/components/schemas/Voucher'
        contractDurationInMonths:
          type: integer
        connectionType:
          $ref: '#/components/schemas/ConnectionType'

    Product:
      type: object
      properties:
        productId:
          type: integer
        providerName:
          type: string
        productInfo:
          $ref: '#/components/schemas/ProductInfo'

    Output:
      type: object
      properties:
        products:
          type: array
          items:
            $ref: '#/components/schemas/Product'

    Input:
      type: object
      properties:
        installation:
          type: boolean
        connectionEnum:
          $ref: '#/components/schemas/ConnectionType'
        address:
          $ref: '#/components/schemas/Address'
