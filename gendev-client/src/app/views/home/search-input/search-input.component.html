<div class="flex justify-center items-center py-12 px-4" style="min-height: 60vh;">
  <div class="bg-card/80 backdrop-blur-sm border border-border/50 shadow-xl relative cursor-pointer transition-all duration-300 ease-out"
       [class]="isExpanded() ? 'p-8 expanded-search rounded-3xl shadow-2xl' : 'py-4 px-6 collapsed-search rounded-2xl shadow-lg hover:shadow-xl'"
       [ngClass]="{'hover-lift': !isExpanded()}">
    
    <div class="text-muted-foreground flex items-center"
         [class]="isExpanded() ? 'hidden' : 'absolute left-0 top-1/2 -translate-y-1/2 ml-4'"
         (click)="toggleExpanded()">
      <fa-icon 
        [icon]="faSearch" 
        class="mr-3 text-primary/70 text-lg">
      </fa-icon>
    </div>

    @if (isExpanded()) {
    <form (ngSubmit)="onSubmit()" class="space-y-6">
      <div class="space-y-4">
        <input
          hlmInput
          type="text"
          [(ngModel)]="street"
          name="street"
          placeholder="Street Address"
          size="lg"
          class="w-full rounded-xl border-border/50 bg-background/50 backdrop-blur-sm focus:border-primary focus:ring-primary/20 transition-all duration-200"
          required
        />

        <input
          hlmInput
          type="text"
          [(ngModel)]="houseNumber"
          name="houseNumber"
          placeholder="House Number (e.g. 123A)"
          size="lg"
          class="w-full rounded-xl border-border/50 bg-background/50 backdrop-blur-sm focus:border-primary focus:ring-primary/20 transition-all duration-200"
          required
        />

        <input
          hlmInput
          type="text"
          [(ngModel)]="city"
          name="city"
          placeholder="City"
          size="lg"
          class="w-full rounded-xl border-border/50 bg-background/50 backdrop-blur-sm focus:border-primary focus:ring-primary/20 transition-all duration-200"
          required
        />

        <input
          hlmInput
          type="text"
          [(ngModel)]="zipCode"
          name="zipCode"
          placeholder="ZIP Code"
          size="lg"
          class="w-full rounded-xl border-border/50 bg-background/50 backdrop-blur-sm focus:border-primary focus:ring-primary/20 transition-all duration-200"
          required
        />
      </div>

      <button hlmBtn 
              type="submit" 
              variant="default"
              size="lg"
              class="w-full rounded-xl font-semibold bg-primary hover:bg-primary/90 text-primary-foreground py-4 transition-all duration-200 hover-lift shadow-lg hover:shadow-xl" 
              [disabled]="!isFormValid()">
        <fa-icon [icon]="faSearch" class="mr-2"></fa-icon>
        Search Internet Offers
      </button>
    </form>
    } @else {
    <div class="text-muted-foreground select-none ml-14 py-2 font-medium" 
         (click)="toggleExpanded()"
         style="cursor: pointer;">
      Search for internet offers by address...
    </div>
    }
  </div>
</div>
